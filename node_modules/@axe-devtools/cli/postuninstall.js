#!/usr/bin/env node

const fs = require('fs');
const path = require('path');

const axeCoreCLIPath = path.join(
  process.cwd(),
  'node_modules',
  '@axe-core',
  'cli',
  'axe-cli'
);

const axeCoreExist = fs.existsSync(axeCoreCLIPath);

if (axeCoreExist) {
  const axeSymlink = path.join(process.cwd(), 'node_modules', '.bin', 'axe');

  const axeCoreRelativePath = path.relative(
    path.join(process.cwd(), 'node_modules', '.bin'),
    axeCoreCLIPath
  );

  fs.symlinkSync(axeCoreRelativePath, axeSymlink);
  // eslint-disable-next-line no-console
  console.log('@axe-core/cli is set as the default CLI tool.');
}
